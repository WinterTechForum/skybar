buildscript {
  repositories {
    jcenter()
  }
  dependencies {
    classpath 'com.github.jengelman.gradle.plugins:shadow:1.2.1'
  }
}

plugins {
  id 'java'
  id 'com.github.johnrengelman.shadow' version '1.2.1'
  id 'maven'
}

group = 'org.wtf'
version = '1.0-SNAPSHOT'

description = """"""

sourceCompatibility = 1.8
targetCompatibility = 1.8

repositories {
  jcenter()
}

ext.deps = [
    jetty: '9.3.0.M1'
]

dependencies {
  compile group: 'org.ow2.asm', name: 'asm-debug-all', version: '5.0.3'
  compile group: 'org.eclipse.jetty', name: 'jetty-server', version: "${deps.jetty}"
  compile group: 'org.eclipse.jetty', name: 'jetty-util-ajax', version: "${deps.jetty}"
  compile group: 'org.eclipse.jetty.websocket', name: 'websocket-server', version: "${deps.jetty}"
  compile group: 'org.eclipse.jetty', name: 'jetty-servlet', version: "${deps.jetty}"
  compile group: 'org.webjars', name: 'angularjs', version: '1.3.13'
  compile 'com.google.code.findbugs:jsr305:3.0.0'

  testCompile group: 'junit', name: 'junit', version: '4.12'

  //todo: The following was generated by the gradle init pom converter. It's not a valid group. Not sure if it's
  // needed or not.
  // system group: 'com.sun', name: 'tools', version:'v'
}

shadowJar {
  relocate 'org.objectweb.asm', 'org.wtf.skybar.shaded.asm'
  relocate 'javax.servlet', 'org.wtf.skybar.shaded.javax.servlet'
  relocate 'org.eclipse.jetty', 'org.wtf.skybar.shaded.org.eclipse.jetty'

  manifest {
    attributes 'Premain-Class': 'org.wtf.skybar.agent.SkybarAgent'
  }
}

task wrapper(type: Wrapper) {
  gradleVersion = '2.3'
}
